const api="https://api.dfgear.xyz";function toast(e,t){let a=`<div class="dfToast alert alert-${e} alert-dismissible fade show" role="alert">\n    <div>${t}</div>\n    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>\n  </div>`;$(".container").append(a),setTimeout(()=>{$(".dfToast").eq(0).remove()},2e3)}function numberFmt(e){return parseFloat(e).toLocaleString("ko-KR")}function convertServer(e){switch(e){case"anton":return"안톤";case"bakal":return"바칼";case"cain":return"카인";case"casillas":return"카시야스";case"diregie":return"디레지에";case"hilder":return"힐더";case"prey":return"프레이";case"siroco":return"시로코";case"all":return"전체";case"adventure":return"모험단"}return"서버에러"}function recentApply(e,t,a=""){try{if(""==e||""==t)return;let r=localStorage.getItem("recent");if(null!=r&&null!=r){if(r.indexOf(`"cName":"${t}","sId":"${e}"`)>-1)return;r=JSON.parse(r)}else r=[];r.length>=6&&r.shift(),r.push({cId:a,cName:t,sId:e}),localStorage.setItem("recent",JSON.stringify(r))}catch(e){console.log(e)}}function recentDelete(e){try{let t=localStorage.getItem("recent");t=null!=t?JSON.parse(t):[],t.length>0&&t.length>=e+1&&(t.splice(e,1),recentView(t)),localStorage.setItem("recent",JSON.stringify(t)),0==t.length&&$(".recentBox").removeClass("active")}catch(e){console.log(e)}}function recentSearch(e){try{return serverId=e.sId,characterName=e.cName,characterId=e.cId,"all"===serverId?($("select[name='server']").val(serverId),$("input[name='name']").val(characterName),void Search()):"adventure"===serverId?(sessionStorage.setItem("sId",serverId),sessionStorage.setItem("cName",characterName),location.href=`https://dfgear.xyz/adventure?cName=${encodeURIComponent(characterName)}`):location.href=`./character?sId=${serverId}&cName=${encodeURIComponent(characterName)}&cId=${characterId}`}catch(e){Search()}}function ligthModeChange(e){let t=localStorage.getItem("theme");null!=t&&""!==t||(t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),t="dark"===t?"light":"dark",localStorage.setItem("theme",t),document.documentElement.setAttribute("data-bs-theme",t),e.className="btn btn-"+("light"==t?"secondary":"light"),e.innerHTML="dark"===t?"라이트모드":"다크모드"}function recentView(e){$(".r-list > *").remove(),e.forEach((e,t)=>{$(".r-list").append(`<div class="r-element"><div class="ndrag"><span>${convertServer(e.sId)}</span><div onclick="recentSearch({'sId':'${e.sId}','cId':'${e.cId}','cName':'${e.cName}'})">${e.cName}</div></div><label data-num="${t}">x</label></div>`)})}function checkError(e){return e.indexOf("APIKEY")>-1?toast("danger","에러 발생_APIKEY 오류"):e.indexOf("MISSING_PARAMETER")>-1?toast("danger","에러 발생_입력값 오류"):e.indexOf("MISSING_SERVER")>-1?toast("danger","서버아이디가 잘못 입력되었습니다"):e.indexOf("TOO_LONG_ADVNAME")>-1?toast("danger","모험단명명은 30자리 이내로 검색해주세요"):e.indexOf("TOO_LONG_NAME")>-1?toast("danger","캐릭터명은 20자리 이내로 검색해주세요"):e.indexOf("NO_CHARACTER")>-1?toast("danger","일치하는 캐릭터 정보가 없습니다"):e.indexOf("NOT_FOUND_CHARACTER")>-1?toast("danger","캐릭터 정보를 찾을 수 없습니다"):e.indexOf("DENY_CHARACTER")>-1?toast("danger","소유자의 요청으로 조회가 차단된 캐릭터 입니다"):e.indexOf("HIDE_CHARACTER")>-1?toast("danger","소유자의 요청으로 숨김 처리된 캐릭터 입니다."):e.indexOf("NOT_REQUEST")>-1?void toast("info","숨김 요청이 정상적으로 작동하지 않은 캐릭터 입니다"):e.indexOf("NO_ADVENTURE")>-1?toast("danger","모험단에 소속된 캐릭터 정보가 없습니다"):e.indexOf("SYSTEM_INSPECT")>-1?(apioff=!0,alert("DNF점검")):alert("관리자에게 문의")}function isBeginningOfMonth(e=new Date){const t=e.getFullYear(),a=e.getMonth(),r=new Date(t,a,1,6,0,0),n=new Date(t,a,3,5,59,59);return e>=r&&e<=n}(()=>{"use strict";const e=()=>localStorage.getItem("theme"),t=()=>{const t=e();return t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},a=e=>{"auto"===e&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.setAttribute("data-bs-theme","dark"),e="dark"):document.documentElement.setAttribute("data-bs-theme",e);let t=document.getElementById("btn_lightmode");t.className=`btn btn-${"light"==e?"secondary":e}`,t.innerHTML="dark"===e?"라이트모드":"다크모드"};a(t());const r=(e,t=!1)=>{const a=document.querySelector("#bd-theme");if(!a)return;const r=document.querySelector("#bd-theme-text"),n=document.querySelector(".theme-icon-active use"),c=document.querySelector(`[data-bs-theme-value="${e}"]`),s=c.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")}),c.classList.add("active"),c.setAttribute("aria-pressed","true"),n.setAttribute("href",s);const o=`${r.textContent} (${c.dataset.bsThemeValue})`;a.setAttribute("aria-label",o),t&&a.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const r=e();"light"!==r&&"dark"!==r&&a(t())}),window.addEventListener("DOMContentLoaded",()=>{r(t()),document.querySelectorAll("[data-bs-theme-value]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-bs-theme-value");(e=>{localStorage.setItem("theme",e)})(t),a(t),r(t,!0)})})})})(),$(document).click(function(e){$("p.focus").removeClass("focus"),$(e.target).is(".gear-list li.list-group-item > p")&&$(e.target).addClass("focus")});